!function(t,i,e,r){var n=function(i,e){this.elem=i,this.$elem=t(i),this.options=e,this.currentData=[]};n.prototype={defaults:{multiple:r,trigger:"Select value",containerClass:"",width:!1,search:!1,searchAutofocus:!1,autofocusScrollOffset:0,coloring:{}},config:{},init:function(){return this.config=t.extend({},this.defaults,this.options),this.config.multiple===r&&(this.config.multiple=this.$elem.is("select[multiple='multiple']")),this.$elem.is("select")?this.config.width===!1||Math.floor(this.config.width)==this.config.width&&t.isNumeric(this.config.width)?(this._build(),this.$elem.css("display","none"),this._fillList(),this.$container.find(".pc-trigger").click(function(){var i=this.$container.find(".pc-list");i.toggle(),this.config.search&&this.config.searchAutofocus&&i.is(":visible")&&(i.find("input").focus(),t("html, body").animate({scrollTop:i.find("input").offset().top-this.config.autofocusScrollOffset},800))}.bind(this)),t(e).mouseup(function(t){var i=this.$container.find(".pc-list");i.is(t.target)||0!==i.has(t.target).length||this.$container.find(".pc-trigger").is(t.target)||(i.hide(),this.config.search&&(this.$container.find(".pc-list input").val(""),this._updateList(this.currentData)))}.bind(this)),this):void console.log("Picker - Width is not a integer."):void console.log("Picker - Element is not Selectbox")},pc_selected:function(i){var e=t(i.target),r=e.data("id");this.config.multiple?(this.$container.prepend(this._createElement(e)),e.remove(),this.config.search&&(this.currentData=this.currentData.filter(function(t){return t.id!=r})),0!=this.$container.find(".pc-list li").size()||this.config.search||this.$container.find(".pc-trigger").hide()):(this.$elem.find("option").removeAttr("selected"),this.config.coloring[r]?this.$container.find(".pc-trigger").removeClass().addClass(this.config.coloring[r]+" pc-trigger pc-element").contents().first().replaceWith(e.text()):this.$container.find(".pc-trigger").contents().first().replaceWith(e.text())),this.$elem.find("option[value='"+r+"']").attr("selected","selected"),this.$container.find(".pc-list").hide(),this.config.search&&(this.$container.find(".pc-list input").val(""),this._updateList(this.currentData))},pc_remove:function(i){var e=t(i.target),r=e.parent().data("id"),n=e.parent().data("order"),s=t("<li>").html(e.parent().text()).attr("data-id",r).attr("data-order",n);if(s.click(this.pc_selected.bind(this)),this.config.search){var a;for(a=0;a<this.currentData.length;a++)if(0==a){if(n<this.currentData[a].order){this.currentData.splice(0,0,{id:r,text:e.parent().text(),order:n});break}}else if(a==this.currentData.length-1){if(n>this.currentData[a].order){this.currentData.splice(a,0,{id:r,text:e.parent().text(),order:n});break}}else if(this.currentData[a-1].order<n&&n<this.currentData[a].order){this.currentData.splice(a,0,{id:r,text:e.parent().text(),order:n});break}}var c=this.$container.find(".pc-list li");0==c.size()?(this.$container.find(".pc-list ul").append(s),this.$container.find(".pc-trigger").show()):1==c.size()?n>c.data("order")?s.insertAfter(c):s.insertBefore(c):c.each(function(i,e){var e=t(e);if(e.is(":first-child")){if(n<e.data("order"))return s.insertBefore(e),!1;if(n>e.data("order")&&n<e.next().data("order"))return s.insertAfter(e),!1}else if(e.is(":last-child")){if(n>e.data("order"))return s.insertAfter(e),!1}else if(n>e.data("order")&&n<e.next().data("order"))return s.insertAfter(e),!1}),this.$elem.find(" option[value='"+r+"']").removeAttr("selected"),e.parent().remove()},pc_search:function(i){var e=t(i.target),r=this.currentData.filter(function(t){return-1!=t.text.toLowerCase().indexOf(e.val().toLowerCase())});this._updateList(r)},_createElement:function(i){var e=this.config.coloring[i.data("id")],r=t("<span>").addClass("pc-element "+(e?e:"")).text(i.text()).attr("data-id",i.data("id")).attr("data-order",i.data("order"));return r.append(t("<i>").click(this.pc_remove.bind(this)).addClass("fa fa-close")),r},_build:function(){if(this.$container=t("<div class='picker"+(this.config.containerClass?" "+this.config.containerClass:"")+"'><span class='pc-select'><span class='pc-element pc-trigger'>"+this.config.trigger+"</span><span class='pc-list' "+(this.config.width?"style='width:"+this.config.width+"px;'":"")+"><ul></ul></span></span></div>"),this.$container.insertAfter(this.$elem),this.config.search){var i=t("<input type='search' placeholder='Vyhledávejte'>");i.on("input",this.pc_search.bind(this)),this.$container.find(".pc-list").prepend(i)}},_fillList:function(){var i=this.$container.find(".pc-list ul"),e=0;this.$elem.find("option").each(function(r,n){var s=t("<li>").html(t(n).text()).attr("data-id",t(n).attr("value")).attr("data-order",e);s.click(this.pc_selected.bind(this)),i.append(s),this.config.search&&this.currentData.push({id:t(n).attr("value"),text:t(n).text(),order:e}),"selected"==t(n).attr("selected")&&s.click(),e++}.bind(this)),this.$container.find(".pc-trigger").show()},_updateList:function(i){var e=this.$container.find(".pc-list ul");if(0==i.length)return void e.html('<li style="font-style: italic; text-align: center;">Žádné výsledky</li>');e.html("");var r;for(r=0;r<i.length;r++){var n=t("<li>").html(i[r].text).attr("data-id",i[r].id).attr("data-order",i[r].order);n.click(this.pc_selected.bind(this)),e.append(n)}}},t.fn.picker=function(t){return this.each(function(){new n(this,t).init()})}}(jQuery,window,document);